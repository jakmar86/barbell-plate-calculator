<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Barbell Plate Calculator</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for Inter font and general body styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a202c; /* Dark background */
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top for better scrolling on small screens */
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
            color: #e2e8f0; /* Light text color for body */
        }
        .container {
            background-color: #2d3748; /* Slightly lighter dark for container */
            border-radius: 1rem; /* Rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3); /* Darker shadow */
            padding: 2.5rem;
            max-width: 600px;
            width: 100%;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        input[type="number"],
        input[type="text"] {
            border: 1px solid #4a5568; /* Darker gray border */
            background-color: #2d3748; /* Match container background */
            color: #e2e8f0; /* Light text color */
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            width: 100%;
            font-size: 1rem;
            transition: border-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        input[type="number"]:focus,
        input[type="text"]:focus {
            outline: none;
            border-color: #63b3ed; /* Lighter blue focus border */
            box-shadow: 0 0 0 3px rgba(99, 179, 237, 0.25); /* Light blue shadow */
        }
        button {
            background-color: #A7D9FF; /* Even lighter, more vibrant blue for the button */
            color: #1a202c; /* Dark text for contrast */
            padding: 1rem 2rem; /* Increased padding for larger button */
            border-radius: 0.5rem;
            font-weight: 700; /* Bolder text */
            font-size: 1.125rem; /* Slightly larger font */
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, transform 0.1s ease-in-out, box-shadow 0.2s ease-in-out;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4); /* More prominent shadow in default state */
        }
        button:hover {
            background-color: #63b3ed; /* Slightly darker light blue on hover */
            transform: translateY(-2px); /* Lift effect */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5); /* Even more prominent shadow on hover */
        }
        button:active {
            transform: translateY(0);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .result-box {
            background-color: #28303d; /* Even darker for results box */
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-top: 1.5rem;
            font-size: 1.1rem;
            color: #cbd5e0; /* Lighter text */
            line-height: 1.6;
        }
        .result-box h2 { /* Targeting the result heading */
            color: #63b3ed; /* Vibrant blue for the result heading */
            font-weight: 700; /* Make it bolder */
            font-size: 1.5rem; /* Slightly larger font for clarity */
            margin-bottom: 0.75rem; /* Adjust margin for spacing */
        }
        .error-message {
            color: #fc8181; /* Lighter red for errors */
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        .plate-item {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background-color: #63b3ed; /* Lighter blue for plates */
            color: white;
            border-radius: 9999px; /* Fully rounded */
            padding: 0.5rem 1rem;
            margin: 0.25rem;
            font-weight: 600;
            min-width: 40px;
            text-align: center;
        }
        .plate-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }
        .plate-selector-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 0.5rem;
            background-color: #2d3748; /* Match container background */
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            border: 1px solid #4a5568; /* Darker border */
        }
        .plate-selector-row label {
            font-weight: 500;
            color: #cbd5e0; /* Light text color */
            flex-grow: 1;
        }
        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .quantity-button {
            background-color: #718096; /* Darker gray button */
            color: white;
            border-radius: 0.25rem;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .quantity-button:hover {
            background-color: #a0aec0; /* Lighter gray on hover */
        }
        .quantity-input {
            width: 50px;
            text-align: center;
            -moz-appearance: textfield; /* Firefox */
            appearance: textfield; /* Other browsers */
            background-color: #2d3748; /* Match container background */
            color: #e2e8f0; /* Light text color */
            border: 1px solid #4a5568; /* Darker border */
            border-radius: 0.25rem;
        }
        .quantity-input::-webkit-outer-spin-button,
        .quantity-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* Collapsible Section Styles */
        .collapsible-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #28303d; /* Darker for header */
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #cbd5e0; /* Light text */
            transition: background-color 0.2s ease-in-out;
        }
        .collapsible-header:hover {
            background-color: #1a202c; /* Even darker on hover */
        }
        .collapsible-icon {
            transition: transform 0.3s ease-in-out;
            color: #63b3ed; /* Blue icon */
        }
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-in-out, padding 0.3s ease-in-out;
            padding: 0 1rem; /* Initial padding, will expand */
        }
        .collapsible-content.expanded {
            max-height: 900px; /* Increased expansion height */
            padding: 1rem; /* Expanded padding */
        }
        .collapsible-icon.rotated {
            transform: rotate(90deg);
        }

        /* Adjusted for inner scrollable content */
        #plateInventorySection {
            max-height: 600px; /* Increased to 3x the previous 200px */
            overflow-y: auto; /* Enable vertical scrolling */
            padding-right: 10px; /* Add some padding to prevent scrollbar from overlapping content */
            background-color: #2d3748; /* Match container background */
            border: 1px solid #4a5568; /* Darker border */
        }
        /* Message box dark theme */
        #messageBox .bg-white {
            background-color: #2d3748; /* Dark background */
            color: #e2e8f0; /* Light text */
        }
        #messageBoxTitle {
            color: #e2e8f0; /* Light title text */
        }
        #messageBoxContent {
            color: #cbd5e0; /* Lighter content text */
        }
        #messageBoxCloseBtn {
            background-color: #4299e1; /* Blue button */
            color: white;
        }
        #messageBoxCloseBtn:hover {
            background-color: #3182ce; /* Darker blue on hover */
        }

        /* New styles for remove button and add plate section */
        .remove-button {
            background-color: #e53e3e; /* Red for remove */
            color: white;
            border-radius: 0.25rem;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            margin-left: 0.5rem; /* Spacing from quantity controls */
        }
        .remove-button:hover {
            background-color: #c53030; /* Darker red on hover */
        }
        .add-plate-section {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid #4a5568; /* Separator line */
        }
        .add-plate-input {
            flex-grow: 1;
            border: 1px solid #4a5568;
            background-color: #2d3748;
            color: #e2e8f0;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
        }
        .add-plate-button {
            background-color: #48bb78; /* Green for add */
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
        }
        .add-plate-button:hover {
            background-color: #38a169; /* Darker green on hover */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-4xl font-bold text-center text-blue-300 mb-6">Barbell Plate Calculator</h1>

        <!-- Input Section -->
        <div class="input-group">
            <label for="targetWeight" class="block text-blue-200 text-sm font-semibold mb-2">Target Weight (kg):</label>
            <input type="number" id="targetWeight" placeholder="e.g., 100" class="w-full" min="0" value="60">
        </div>

        <div class="input-group">
            <label for="barbellWeight" class="block text-blue-200 text-sm font-semibold mb-2">Barbell Weight (kg):</label>
            <input type="number" id="barbellWeight" placeholder="e.g., 20" class="w-full" min="0" value="20">
        </div>

        <div class="input-group">
            <div id="plateInventoryHeader" class="collapsible-header">
                <span>Available Plates (Total Inventory)</span>
                <span id="collapsibleIcon" class="collapsible-icon">&#9658;</span> <!-- Right-pointing triangle -->
            </div>
            <div id="plateInventoryCollapsibleContent" class="collapsible-content">
                <div id="plateInventorySection" class="border border-gray-300 rounded-lg p-4">
                    <!-- Plate selectors will be dynamically inserted here by JavaScript -->
                </div>
                <div class="add-plate-section">
                    <input type="number" id="newPlateWeightInput" class="add-plate-input" placeholder="New plate weight (kg)" min="0.01" step="0.01">
                    <button id="addNewPlateBtn" class="add-plate-button">Add Plate</button>
                </div>
                <p class="text-gray-500 text-xs mt-1">Adjust the quantity of each plate you own. The calculator will ensure symmetrical loading.</p>
            </div>
        </div>

        <button id="calculateBtn">Calculate Plates</button>

        <!-- Result Section -->
        <div id="result" class="result-box hidden">
            <h2 class="text-xl font-semibold text-gray-800 mb-3">Result:</h2>
            <p id="totalWeightAchieved" class="mb-2"></p>
            <p id="platesPerSide"></p>
            <div id="plateBreakdown" class="plate-list"></div>
            <p id="errorMessage" class="error-message"></p>
        </div>

        <!-- Message Box for alerts -->
        <div id="messageBox" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center hidden z-50">
            <div class="bg-white p-8 rounded-lg shadow-xl max-w-sm w-full text-center">
                <h3 id="messageBoxTitle" class="text-xl font-bold mb-4 text-gray-800"></h3>
                <p id="messageBoxContent" class="text-gray-700 mb-6"></p>
                <button id="messageBoxCloseBtn" class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg">OK</button>
            </div>
        </div>

    </div>

    <script>
        // Get references to HTML elements
        const targetWeightInput = document.getElementById('targetWeight');
        const barbellWeightInput = document.getElementById('barbellWeight');
        const plateInventorySection = document.getElementById('plateInventorySection');
        const calculateBtn = document.getElementById('calculateBtn');
        const resultDiv = document.getElementById('result');
        const totalWeightAchievedSpan = document.getElementById('totalWeightAchieved');
        const platesPerSideSpan = document.getElementById('platesPerSide');
        const plateBreakdownDiv = document.getElementById('plateBreakdown');
        const errorMessageSpan = document.getElementById('errorMessage');

        // Message box elements
        const messageBox = document.getElementById('messageBox');
        const messageBoxTitle = document.getElementById('messageBoxTitle');
        const messageBoxContent = document.getElementById('messageBoxContent');
        const messageBoxCloseBtn = document.getElementById('messageBoxCloseBtn');

        // Collapsible elements
        const plateInventoryHeader = document.getElementById('plateInventoryHeader');
        const plateInventoryCollapsibleContent = document.getElementById('plateInventoryCollapsibleContent');
        const collapsibleIcon = document.getElementById('collapsibleIcon');

        // New plate management elements
        const newPlateWeightInput = document.getElementById('newPlateWeightInput');
        const addNewPlateBtn = document.getElementById('addNewPlateBtn');


        // Stores the current quantity for each plate type. This object will be the source of truth.
        const plateQuantities = {};

        // Initial plate quantities including 1kg and 2kg, ensuring pairs for symmetrical loading
        // This array now explicitly lists pairs for common sizes
        const initialPlates = [
            25, 25, // Two 25kg plates
            20, 20, // Two 20kg plates
            15, 15, // Two 15kg plates
            10, 10, // Two 10kg plates
            6.5, 6.5, // Two 6.5kg plates
            5, 5, // Two 5kg plates
            2.5, 2.5, 2.5, 2.5, // Four 2.5kg plates
            1.25, 1.25, // Two 1.25kg plates
            2, 2, // Two 2kg plates
            1, 1, // Two 1kg plates
            0.5, 0.5, // Two 0.5kg plates
            0.25, 0.25 // Two 0.25kg plates
        ];

        initialPlates.forEach(plate => {
            plateQuantities[plate] = (plateQuantities[plate] || 0) + 1;
        });


        /**
         * Displays a custom message box instead of alert().
         * @param {string} title - The title of the message box.
         * @param {string} message - The content message.
         */
        function showMessageBox(title, message) {
            messageBoxTitle.textContent = title;
            messageBoxContent.textContent = message;
            messageBox.classList.remove('hidden');
        }

        // Close message box when OK button is clicked
        messageBoxCloseBtn.addEventListener('click', () => {
            messageBox.classList.add('hidden');
        });

        /**
         * Renders the plate quantity selectors in the UI.
         */
        function renderPlateSelectors() {
            plateInventorySection.innerHTML = ''; // Clear previous selectors

            // Sort plate sizes numerically in descending order
            const sortedPlateSizes = Object.keys(plateQuantities)
                                           .map(Number)
                                           .sort((a, b) => b - a);

            sortedPlateSizes.forEach(plateSize => {
                const row = document.createElement('div');
                row.classList.add('plate-selector-row');

                const label = document.createElement('label');
                label.textContent = `${plateSize} kg:`;
                row.appendChild(label);

                const controls = document.createElement('div');
                controls.classList.add('quantity-controls');

                const decrementBtn = document.createElement('button');
                decrementBtn.classList.add('quantity-button');
                decrementBtn.textContent = '-';
                decrementBtn.addEventListener('click', () => {
                    if (plateQuantities[plateSize] > 0) {
                        plateQuantities[plateSize]--;
                        quantityInput.value = plateQuantities[plateSize];
                    }
                });
                controls.appendChild(decrementBtn);

                const quantityInput = document.createElement('input');
                quantityInput.type = 'number';
                quantityInput.min = '0';
                quantityInput.value = plateQuantities[plateSize]; // Use stored quantity
                quantityInput.classList.add('quantity-input');
                quantityInput.addEventListener('change', (event) => {
                    let value = parseInt(event.target.value);
                    if (isNaN(value) || value < 0) {
                        value = 0;
                    }
                    plateQuantities[plateSize] = value;
                    event.target.value = value; // Ensure input reflects valid number
                });
                controls.appendChild(quantityInput);

                const incrementBtn = document.createElement('button');
                incrementBtn.classList.add('quantity-button');
                incrementBtn.textContent = '+';
                incrementBtn.addEventListener('click', () => {
                    plateQuantities[plateSize]++;
                    quantityInput.value = plateQuantities[plateSize];
                });
                controls.appendChild(incrementBtn);

                const removeBtn = document.createElement('button');
                removeBtn.classList.add('remove-button');
                removeBtn.textContent = 'X'; // Or a trash icon
                removeBtn.addEventListener('click', () => {
                    delete plateQuantities[plateSize]; // Remove from inventory
                    renderPlateSelectors(); // Re-render the list
                });
                controls.appendChild(removeBtn);

                row.appendChild(controls);
                plateInventorySection.appendChild(row);
            });
        }

        /**
         * Gathers the available plates from the UI selectors into a flat array.
         * @returns {number[]} An array of all individual plate weights.
         */
        function getAvailablePlatesFromSelectors() {
            const availablePlates = [];
            for (const size in plateQuantities) {
                if (plateQuantities.hasOwnProperty(size)) {
                    for (let i = 0; i < plateQuantities[size]; i++) {
                        availablePlates.push(parseFloat(size));
                    }
                }
            }
            return availablePlates;
        }

        /**
      
